<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:include="dodaci/sabloni :: headFragment" />
<body>

	<div th:include="dodaci/sabloni :: adminHeaderFragment"></div>


	<!-- Marketing messaging and featurettes
================================================== -->
	<!-- Wrap the rest of the page in another container to center all the content. -->

	<div class="container">

		<!-- START THE FEATURETTES -->

		<div class="featurette">
			<h2 class="featurette-heading">
				Dobrodošli <span th:text="${user}"></span>
			</h2>

			<p class="lead">In simple terms, a responsive web design figures
				out what resolution of device it's being served on. Flexible grids
				then size correctly to fit the screen.</p>
		</div>

		<hr class="featurette-divider" />

		<!-- /END THE FEATURETTES -->

		<!-- Navs
  ================================================== -->

<div class="container">
		<div class="row">
			<div class="col-md-12 text-center"
				sec:authorize="hasRole('ROLE_ADMIN')">

				<h3 id="tabs">Sažetak</h3>
				<ul class="nav nav-tabs">
					<li class="active disabled"><a href="#TEST" data-toggle="tab"><i class="glyphicon glyphicon-arrow-right"></i></a></li>
					<li><a href="#A" data-toggle="tab"><span th:class="${boolAtributi[0]} ? text-danger:text-success">Dodijeljena vozila</span></a></li>
					<li><a href="#X" data-toggle="tab"><span th:class="${boolAtributi[0]} ? text-danger:text-success">Slobodna vozila</span></a></li>
					<li><a href="#B" data-toggle="tab"><span th:class="${boolAtributi[1]} ? text-danger:text-success">Registracije</span></a></li>
					<li><a href="#C" data-toggle="tab"><span th:class="${boolAtributi[2]} ? text-danger:text-success" th:text="${#dates.monthName(#dates.createNow())} + ' mileage report'"></span></a></li>
					<li><a href="#D" data-toggle="tab"><span th:class="${boolAtributi[3]} ? text-danger:text-success">Servisi</span></a></li>
<!-- 					<li><a href="#E" data-toggle="tab">Support</a></li> -->
				</ul>
				<div class="tabbable">
					<div class="tab-content">
						<div class="tab-pane active" id="TEST">
							<h1 class="center">Odaberite tab da otvorite željeni sažetak!</h1>
						</div>
						<div class="tab-pane" id="A">
						
							<div th:if="${dodAtribut}" th:each="dodijeljeni : ${dodAtribut}">
								<table class="table table-bordered table-striped table-hover">
									<thead>
										<tr class="success">
											<th class="col-md-3 text-center h3" colspan="3" th:text="${dodijeljeni.key.tablica}">Vozilo</th>
										</tr>
										<tr>
											<th class="text-center h4">Korisnik</th>
											<th class="text-center h4">Datum</th>
											<th class="text-center h4">Radnje</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="dod : ${dodijeljeni.value}">
											<td class="col-md-3" th:text="${dod.korisnik.ime}+' '+${dod.korisnik.prezime}" >
												
											</td>
											<td class="col-md-3"
												th:text="${#calendars.format(dod.dodijeljeno,'dd MMMM yyyy')}">date</td>
											
											<td class="col-md-3"><a class="btn btn-info btn-sm"
												th:href="@{/admin/dodjeljivanje/(vin=${dod.vozilo.vin})}"><i
													class="glyphicon glyphicon-list-alt"></i> <span
													th:text="#{rad.prk}">Show action</span></a></td>
										</tr>
									</tbody>
								</table>
							</div>
							<div th:if="${report !=null}">
								<div th:if="${report.isEmpty()}">

									<span>
										<h3>
											Nema zabilježenih servisa u mjesecu <span
												th:text="${#calendars.monthName(#calendars.createToday())}"></span>
										</h3>
									</span>

								</div>
							</div>
						</div>
						<div class="tab-pane" id="X">
						
							<div th:if="${not #lists.isEmpty(slobAtribut)}">
								<table class="table table-bordered table-striped table-hover">
									<thead>
										<tr>
											<th class="text-center h4">Tablica</th>
											<th class="text-center h4">Radnje</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="regi : ${slobAtribut}">
											<td class="col-md-3" th:text="${regi.tablica}" >
												
											</td>
											
											<td class="col-md-3"><a class="btn btn-info btn-sm"
												th:href="@{/admin/dodjeljivanje/(vin=${regi.vozilo.vin})}"><i
													class="glyphicon glyphicon-list-alt"></i> <span
													th:text="#{rad.prk}">Show action</span></a></td>
										</tr>
									</tbody>
								</table>
							</div>
							<div th:if="${slobAtribut !=null}">
								<div th:if="${slobAtribut.isEmpty()}">

									<span>
										<h3>
											Nema slobodnih vozila <span
												th:text="${#calendars.monthName(#calendars.createToday())}"></span>
										</h3>
									</span>

								</div>
							</div>
						</div>
						<div class="tab-pane" id="B">
							<table th:if="${not #lists.isEmpty(regAtribut)}"
								class="table table-bordered table-striped table-hover">
								<thead>
									<tr class="success">
										<th th:text="#{registrationList.tablica}">Registarske oznake</th>
										<th th:text="#{registrationList.regDo}">Reg do</th>
										<th th:text="#{registrationList.osigDo}">Osig do</th>
										<th th:text="#{rad.na}">Dostupne radnje</th>
									</tr>
								</thead>
								<tbody>
									<tr th:if="${registration}"
										th:each="registration : ${regAtribut}">
										<td th:text="${registration.tablica}">Registarske oznake</td>
										<td
											th:text="${#dates.format(registration.regDo, 'dd-MM-yyyy')}"
											th:class="${#dates.year(#dates.createNow()) ge #dates.year(registration.regDo)} ? (${#dates.month(#dates.createNow()) lt #dates.month(registration.regDo)} ? (${#dates.day(#dates.createNow()) ge #dates.day(registration.regDo)} ? 'danger' : 'warning') : (${#dates.month(#dates.createNow()) ge #dates.month(registration.regDo)} ? 'danger' : (${#dates.day(#dates.createNow()) ge #dates.day(registration.regDo)} ? 'danger' : 'warning')))  : ''"></td>
										<td
											th:text="${#dates.format(registration.osigDo, 'dd-MM-yyyy')}"
											th:class="${#dates.year(#dates.createNow()) ge #dates.year(registration.osigDo)} ? (${#dates.month(#dates.createNow()) lt #dates.month(registration.osigDo)} ? (${#dates.day(#dates.createNow()) ge #dates.day(registration.osigDo)} ? 'danger' : 'warning') : (${#dates.month(#dates.createNow()) ge #dates.month(registration.osigDo)} ? 'danger' : (${#dates.day(#dates.createNow()) ge #dates.day(registration.osigDo)} ? 'danger' : 'warning')))  : ''"></td>
										<td><a class="btn btn-primary btn-sm" th:href="@{/admin/registracije/(vin=${registration.vozilo.vin})}"><i class="glyphicon glyphicon-edit"></i> <span	th:text="#{rad.izm}">Edit action</span></a></td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="tab-pane" id="C">
							
							<div th:if="${mileages}" th:each="mileages : ${mileageAtribut}">
								<table class="table table-bordered table-striped table-hover">
									<thead>
										<tr class="success">
											<th class="col-md-6 text-center h3" colspan="2" th:text="${mileages.key.tablica}">Vozilo</th>
											<th class="col-md-6 text-center h3" colspan="2" ><a
												class="btn btn-success btn-sm btn-large right"
												th:href="@{/admin/servisi/addServis(id=${mileages.key.vozilo.vin})}">Unesi novi servis</a></th>
										</tr>
										<tr>
											<th class="text-center h4">Datum</th>
											<th class="text-center h4">Mjesto</th>
											<th class="text-center h4">Korisnik</th>
											<th class="text-center h4">Zadnja kilometraža</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="mileage,iterStat : ${mileages.value}">
											<td th:class="${iterStat.odd}? 'hidden'" th:text="${#dates.format(mileage.datum, 'dd-MM-yyyy')}"></td>
											<td th:class="${iterStat.even}? 'hidden warning'" colspan="3"><strong>Ukupno pređeno:</strong></td>
											<td th:class="${iterStat.odd}? 'hidden'" th:text="${mileage.lokacija.naziv}"></td>
											<td th:class="${iterStat.odd}? 'hidden'" th:text="${mileage.korisnikVozilo.korisnik.ime} + ' ' + ${mileage.korisnikVozilo.korisnik.prezime}"></td>
											<td th:text="${mileage.kilometraza}"></td>
										</tr>
										
									</tbody>
								</table>
							</div>
							<p >Ukoliko vozila nisu na spisku, znači da nemaju osvježenu kilometražu u ovom mjesecu</p>
						</div>
						<div class="tab-pane" id="D">
							<div th:if="${report}" th:each="servisi : ${report}">
								<table class="table table-bordered table-striped table-hover">
									<thead>
										<tr class="success">
											<th class="col-md-6 text-center h3" colspan="2" th:text="${servisi.key.tablica}">Vozilo</th>
											<th class="col-md-6 text-center h3" colspan="2" ><a
												class="btn btn-success btn-sm btn-large right"
												th:href="@{/admin/servisi/addServis(id=${servisi.key.vozilo.vin})}">Unesi novi servis</a></th>
										</tr>
										<tr>
											<th class="text-center h4">Završen?</th>
											<th class="text-center h4">Datum</th>
											<th class="text-center h4">Vrsta servisa</th>
											<th class="text-center h4">Radnje</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="servis : ${servisi.value}">
											<td class="col-md-3" th:class="${servis.zavrsen} ? primary:danger" th:switch="${servis.zavrsen}">
												<p th:case="true">
													<i class="glyphicon glyphicon-ok"></i>
												</p>
												<p th:case="false">
													<i class="glyphicon glyphicon-minus"></i>
												</p>
											</td>
											<td class="col-md-3"
												th:text="${#calendars.format(servis.datum,'dd MMMM yyyy')}">date</td>
											<td class="col-md-3" th:text="${servis.vrstaServisa.naziv}">Type</td>
											<td class="col-md-3"><a class="btn btn-info btn-sm"
												th:href="@{/admin/servis/izmjena(id=${servis.id})}"><i
													class="glyphicon glyphicon-list-alt"></i> <span
													th:text="#{rad.prk}">Show action</span></a></td>
										</tr>
									</tbody>
								</table>
							</div>
							<div th:if="${report !=null}">
								<div th:if="${report.isEmpty()}">

									<span>
										<h3>
											Nema zabilježenih servisa u ovom mjesecu <span
												th:text="${#calendars.monthName(#calendars.createToday())}"></span>
										</h3>
									</span>

								</div>
							</div>
						</div>
<!-- 						<div class="tab-pane" id="E"> -->
<!-- 							<table th:if="${not #lists.isEmpty(pager.pageList)}" -->
<!-- 								class="table table-bordered table-striped table-hover"> -->
<!-- 								<thead> -->
<!-- 									<tr class="success"> -->
<!-- 										<th class="center" th:text="#{ticketList.ticketDate}">Date</th> -->
<!-- 										<th class="center" th:text="#{ticketList.solvedDate}">Date</th> -->
<!-- 										<th class="center" th:text="#{ticketList.subject}">Subject</th> -->
<!-- 										<th class="center" th:text="#{ticketList.completed}">Y/N</th> -->
<!-- 										<th class="center" th:text="#{actions.title}">Actions</th> -->
<!-- 									</tr> -->
<!-- 								</thead> -->

<!-- 								<tbody> -->
<!-- 									<tr th:each="ticket : ${pager.pageList}"> -->
<!-- 										<td -->
<!-- 											th:text="${ticket.ticketDate} ? ${#dates.format(ticket.ticketDate, 'dd/MM/yyyy')} : ''">Ticket -->
<!-- 											Date</td> -->
<!-- 										<td -->
<!-- 											th:text="${ticket.solvedDate} ? ${#dates.format(ticket.solvedDate, 'dd/MM/yyyy')} : ''">Solved -->
<!-- 											Date</td> -->
<!-- 										<td th:text="${ticket.subject}">Ticket Subject</td> -->
<!-- 										<td th:switch="${ticket.isCompleted}"> -->
<!-- 											<p th:case="true"> -->
<!-- 												<i class="glyphicon glyphicon-ok"></i> -->
<!-- 											</p> -->
<!-- 											<p th:case="false"> -->
<!-- 												<i class="glyphicon glyphicon-minus"></i> -->
<!-- 											</p> -->
<!-- 										</td> -->
<!-- 										<td><a sec:authorize="hasRole('ROLE_USER')" -->
<!-- 											class="btn btn-info btn-sm" -->
<!-- 											th:href="@{/support/show(id=${ticket.id})}"><span -->
<!-- 												th:text="#{actions.show}">Show action</span></a> <a -->
<!-- 											sec:authorize="hasRole('ROLE_ADMIN')" -->
<!-- 											class="btn btn-warning btn-sm" -->
<!-- 											th:href="@{/support/edit(id=${ticket.id})}"><i -->
<!-- 												class="glyphicon glyphicon-edit"></i> <span -->
<!-- 												th:text="#{actions.edit}">Edit action</span></a></td> -->
<!-- 									</tr> -->
<!-- 								</tbody> -->
<!-- 							</table> -->
<!-- 						</div> -->
					</div>
				</div>
				<!-- /tabbable -->
			</div>
		</div>
		</div>


		<div th:include="dodaci/sabloni :: footerFragment"></div>

	</div>
	<!-- /.container -->

	<div th:include="dodaci/sabloni :: jsFragment"></div>

</body>
</html>